<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Fischer-Verein Arbon</title>
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container nav-container">
      <a href="index.html" class="logo">
        <img src="assets/img/logo-fv-arbon.png" alt="Logo Fischer-Verein Arbon">
      </a>

      <button class="nav-toggle" aria-label="Menü öffnen">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <nav class="main-nav">
        <ul>
          <li><a href="index.html">Startseite</a></li>
          <li><a href="beitritt.html">Beitritt</a></li>
          <li><a href="fischerhaus.html">Fischerhaus</a></li>
          <li><a href="jungfischer.html">Jungfischer</a></li>
          <li><a href="leitsatz.html">Leitsatz</a></li>
          <li><a href="galerie.html">Galerie</a></li>
          <li><a href="verein.html">Verein</a></li>
          <li><a href="vorstand.html">Vorstand</a></li>
          <li><a href="news.html">News</a></li>
        </ul>
      </nav>
    </div>
  </header>
<main class="news-page container" style="padding: 2rem 1rem 3rem;">
  <h1>News & Aktuelles</h1>
  <p>Hier findest du aktuelle Meldungen und Ankündigungen vom Fischerverein Arbon.</p>

  <div id="category-filters" class="news-filters" style="margin: 1rem 0; display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>
  <div id="news-container" class="news-container" style="display: grid; gap: 2rem;"></div>
</main>

<script>
  function formatDate(isoDateStr) {
    if (!isoDateStr) return "";
    const d = new Date(isoDateStr);
    const day = String(d.getDate()).padStart(2, '0');
    const month = String(d.getMonth() + 1).padStart(2, '0');
    const year = d.getFullYear();
    return `${day}.${month}.${year}`;
  }

  function normalizeImgur(url) {
    if (!url) return "";
    if (url.includes("imgur.com") && !url.includes("i.imgur.com")) {
      const id = url.split("/").pop().split(".")[0];
      return `https://i.imgur.com/${id}.jpg`;
    }
    return url;
  }

  async function loadNews() {
    try {
      const response = await fetch("https://script.google.com/macros/s/AKfycbxqTHiq_faRgd65D3XyhGUnXOe6xZa-LksdLBWIc4iGOdqqk3ZXhmeoO52LoqBaG_Hi/exec");
      const data = await response.json();

      const container = document.getElementById("news-container");
      const filters = document.getElementById("category-filters");
      const categories = [...new Set(data.map(n => n.Kategorie).filter(Boolean))];

      filters.innerHTML = '<button onclick="filterNews(\'Alle\')" class="news-filter-button">Alle</button>' +
        categories.map(cat => `<button onclick="filterNews('${cat}')" class="news-filter-button">${cat}</button>`).join("");

      window.filterNews = function (category) {
        const cards = document.querySelectorAll(".news-card");
        cards.forEach(card => {
          card.style.display = (category === "Alle" || card.dataset.category === category) ? "flex" : "none";
        });
      }

      data.forEach(news => {
        const imgUrl = normalizeImgur(news["Bild-URL"]);
        const card = document.createElement("article");
        card.className = "news-card";
        card.dataset.category = news.Kategorie || "Sonstiges";
        card.style.background = "#e0f0ff";
        card.style.color = "#003366";
        card.style.borderRadius = "10px";
        card.style.overflow = "hidden";
        card.style.boxShadow = "0 2px 6px rgba(0,0,0,0.1)";
        card.style.display = "flex";
        card.style.flexDirection = "column";
        card.style.height = "100%";

        card.innerHTML = `
          ${imgUrl ? `<img src="${imgUrl}" alt="${news.Titel}" style="width:100%; height:20
