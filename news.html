<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>News – Fischer-Verein Arbon</title>
  <link rel="stylesheet" href="assets/css/styles.css">
  <style>
    .news-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .news-card {
      background: var(--color-surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      padding: 1.5rem;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .news-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.6);
    }

    .news-card img {
      width: 100%;
      border-radius: 10px;
      margin-bottom: 1rem;
      object-fit: cover;
      max-height: 180px;
    }

    .news-card h3 {
      color: var(--color-accent);
      margin-bottom: 0.4rem;
    }

    .news-date {
      color: var(--color-muted);
      font-size: 0.9rem;
      margin-bottom: 0.6rem;
    }

    .news-card p {
      font-size: 1rem;
      color: var(--color-text);
      line-height: 1.5;
    }

    .news-card a {
      display: inline-block;
      margin-top: 0.8rem;
      color: var(--color-accent);
      font-weight: 600;
      text-decoration: none;
    }

    .news-card a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="site-header">
    <div class="container nav-container">
      <a href="index.html" class="logo">
        <img src="assets/img/logo-fv-arbon.png" alt="Logo Fischer-Verein Arbon">
      </a>
      <button class="nav-toggle" aria-label="Menü öffnen">
        <span></span><span></span><span></span>
      </button>
      <nav class="main-nav">
        <ul>
          <li><a href="index.html">Startseite</a></li>
          <li><a href="verein.html">Verein</a></li>
          <li><a href="fischerhaus.html">Fischerhaus</a></li>
          <li><a href="jungfischer.html">Jungfischer</a></li>
          <li><a href="galerie.html">Galerie</a></li>
          <li><a href="news.html">News</a></li>
          <li><a href="vorstand.html">Vorstand</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" style="min-height: 40vh;">
    <div class="hero-overlay"></div>
    <div class="container hero-content">
      <h1>Neuigkeiten</h1>
      <p>Hier findest du aktuelle Meldungen und Berichte aus dem Vereinsleben.</p>
    </div>
  </section>

  <!-- NEWS-LISTE -->
  <main class="section">
    <div class="container">
      <h2>Alle News</h2>
      <div id="news-container" class="news-container">
        <p style="color: var(--color-muted);">Lade aktuelle Meldungen…</p>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container footer-content">
      <div>
        <h3>Fischer-Verein Arbon</h3>
        <p>9320 Arbon<br>Bodensee, Schweiz</p>
        <p><a href="mailto:info@fv-arbon.ch">info@fv-arbon.ch</a></p>
      </div>
      <div>
        <h4>Links</h4>
        <ul>
          <li><a href="verein.html#jahreskalender">Jahreskalender</a></li>
          <li><a href="fischerhaus.html#kalender-fischerhaus">Kalender Fischerhaus</a></li>
          <li><a href="datenschutz.html">Datenschutzerklärung</a></li>
        </ul>
      </div>
      <div>
        <h4>Folgen</h4>
        <p>Hier können später Social-Media-Links ergänzt werden.</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; <span id="year"></span> Fischer-Verein Arbon. Alle Rechte vorbehalten.</p>
    </div>
  </footer>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    const newsContainer = document.getElementById("news-container");

    // ==== HIER DEINE NOTION DATEN EINTRAGEN ====
    const NOTION_DATABASE_ID = "2aebe979be33803eb639000cc7d71cae";
    const NOTION_TOKEN = "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";

    // Beispiel-Struktur der Notion-Datenbank:
    // Titel (title), Datum (date), Beschreibung (rich_text), Bild (files), Link (url)

    async function loadNews() {
      try {
        const res = await fetch(`https://api.notion.com/v1/databases/${NOTION_DATABASE_ID}/query`, {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${NOTION_TOKEN}`,
            "Notion-Version": "2022-06-28",
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            sorts: [{ property: "Datum", direction: "descending" }]
          })
        });

        const data = await res.json();
        newsContainer.innerHTML = "";

        if (!data.results || data.results.length === 0) {
          newsContainer.innerHTML = "<p>Keine aktuellen Meldungen vorhanden.</p>";
          return;
        }

        data.results.forEach(item => {
          const props = item.properties;
          const title = props.Titel?.title?.[0]?.plain_text || "Ohne Titel";
          const date = props.Datum?.date?.start || "";
          const desc = props.Beschreibung?.rich_text?.[0]?.plain_text || "";
          const link = props.Link?.url || "";
          const image = props.Bild?.files?.[0]?.file?.url || "";

          const article = document.createElement("article");
          article.classList.add("news-card");

          article.innerHTML = `
            ${image ? `<img src="${image}" alt="${title}">` : ""}
            <h3>${title}</h3>
            <p class="news-date">${date ? new Date(date).toLocaleDateString("de-DE") : ""}</p>
            <p>${desc}</p>
            ${link ? `<a href="${link}" target="_blank" rel="noopener noreferrer">Weiterlesen →</a>` : ""}
          `;

          newsContainer.appendChild(article);
        });
      } catch (err) {
        console.error(err);
        newsContainer.innerHTML = "<p>Fehler beim Laden der News.</p>";
      }
    }

    loadNews();
  </script>
</body>
</html>
