<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fischer-Verein Arbon – Willkommen</title>
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
  <!-- HEADER -->
  <header class="site-header">
    <div class="container nav-container">
      <a href="index.html" class="logo">
        <img src="assets/img/logo-fv-arbon.png" alt="Logo Fischer-Verein Arbon">
      </a>
      <button class="nav-toggle" aria-label="Menü öffnen">
        <span></span><span></span><span></span>
      </button>
      <nav class="main-nav">
        <ul>
          <li><a href="index.html">Startseite</a></li>
          <li><a href="verein.html">Verein</a></li>
          <li><a href="fischerhaus.html">Fischerhaus</a></li>
          <li><a href="jungfischer.html">Jungfischer</a></li>
          <li><a href="galerie.html">Galerie</a></li>
          <li><a href="vorstand.html">Vorstand</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-overlay"></div>
    <div class="container hero-content">
      <h1>Willkommen beim Fischer-Verein Arbon</h1>
      <p>Am Bodensee zuhause – gemeinsam fischen, lernen und erleben.</p>
      <a href="beitritt.html" class="btn btn-primary" style="margin-top:1rem;">Mitglied werden</a>
    </div>
  </section>

  <!-- AKTUELLES -->
  <section class="section" id="aktuelles">
    <div class="container">
      <h2>Aktuelles</h2>
      <article class="card">
        <img src="assets/gallery/2024_Familienabend/familienabend1.jpg" alt="Familienabend 2024" style="border-radius:10px; margin-bottom:1rem;">
        <h3>Familienabend 2024</h3>
        <p>Ein gelungener Abend mit spannenden Gesprächen, feinem Essen und vielen lachenden Gesichtern. 
        Ein paar Eindrücke findest du in unserer <a href="galerie.html">Galerie</a>.</p>
        <p class="meta">Veröffentlicht am 5. Oktober 2024</p>
      </article>
    </div>
  </section>

  <!-- TERMINE -->
  <section class="section section-alt" id="termine">
    <div class="container">
      <h2>Nächste Termine</h2>
      <iframe 
        src="https://calendar.google.com/calendar/embed?src=Z2JzbWI2NXBndnM3cDNubHU0dTdtZGhtZW9AZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ&ctz=Europe/Zurich&mode=AGENDA&showPrint=0&showTabs=0&showCalendars=0&showTz=0"
        style="border:0; width:100%; height:400px; border-radius:12px;" frameborder="0" scrolling="no">
      </iframe>
    </div>
  </section>

  <!-- RÜCKBLICK -->
  <section class="section" id="rueckblick">
    <div class="container">
      <h2>Rückblick</h2>
      <p class="section-intro">Ein Blick auf unsere letzte Veranstaltung:</p>
      <div id="rueckblick-container" class="gallery-container"></div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container footer-content">
      <div>
        <h3>Fischer-Verein Arbon</h3>
        <p>9320 Arbon<br>Bodensee, Schweiz</p>
        <p><a href="mailto:info@fv-arbon.ch">info@fv-arbon.ch</a></p>
      </div>
      <div>
        <h4>Links</h4>
        <ul>
          <li><a href="verein.html#jahreskalender">Jahreskalender</a></li>
          <li><a href="fischerhaus.html#kalender-fischerhaus">Kalender Fischerhaus</a></li>
          <li><a href="datenschutz.html">Datenschutzerklärung</a></li>
        </ul>
      </div>
      <div>
        <h4>Folgen</h4>
        <p>Hier können später Social-Media-Links ergänzt werden.</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; <span id="year"></span> Fischer-Verein Arbon. Alle Rechte vorbehalten.</p>
    </div>
  </footer>

  <script src="assets/js/main.js"></script>
  <script>
    // Jahr automatisch aktualisieren
    document.getElementById("year").textContent = new Date().getFullYear();

    // Header-Burger aktivieren
    const navToggle = document.querySelector(".nav-toggle");
    const mainNav = document.querySelector(".main-nav");
    if (navToggle && mainNav) {
      navToggle.addEventListener("click", () => {
        mainNav.classList.toggle("active");
      });
    }

    // Letzte Veranstaltung aus Galerie automatisch laden
    async function loadLastEvent() {
      const username = "thomasbrauer777";
      const repo = "fv-arbon-website";
      const path = "assets/gallery";

      try {
        const res = await fetch(`https://api.github.com/repos/${username}/${repo}/contents/${path}`);
        const folders = await res.json();

        const lastFolder = folders.filter(f => f.type === "dir").sort((a, b) => a.name.localeCompare(b.name)).pop();
        if (lastFolder) {
          const imagesRes = await fetch(lastFolder.url);
          const images = await imagesRes.json();
          const container = document.getElementById("rueckblick-container");

          const title = document.createElement("h3");
          title.textContent = lastFolder.name.replaceAll('_', ' ');
          container.appendChild(title);

          const imgList = images
            .filter(i => i.name.match(/\.(jpg|jpeg|png)$/i))
            .slice(0, 3); // nur 3 Bilder

          imgList.forEach(img => {
            const el = document.createElement("img");
            el.src = img.download_url;
            el.alt = img.name;
            el.style.borderRadius = "10px";
            el.style.maxWidth = "30%";
            el.style.margin = "0.5rem";
            container.appendChild(el);
          });

          const link = document.createElement("p");
          link.innerHTML = `<a href="galerie.html" class="btn btn-primary">Mehr Bilder ansehen</a>`;
          container.appendChild(link);
        }
      } catch (e) {
        console.error("Fehler beim Laden der letzten Veranstaltung:", e);
      }
    }

    loadLastEvent();
  </script>
</body>
</html>
